# S3 对象存储

AWS 上最经济实惠的存储方案。

## Access Point

S3 Access Point 为 Bucket 提供独立的访问域名，相比 S3 本身的访问点，它有如下特性：

- 每个 Access Point 都可以配置自己的 ACL 规则、审计日志、可访问范围（公网/VPC），互不影响
- 如果你需要使用 S3 Object Lambda 提供一个不同的对象视图，就必须为 Bucket 绑定一个 Access Point，走这个 Access Point 的请求将会被 Lambda 函数处理。

因此，S3 Access Point 主要是一种在共享的 S3 Bucket 上，对不同的程序或者团队，分别配置对应的权限策略、审计日志等参数的一种方式，其次它也是 S3 Object Lambda 的必要组成部分。

## S3 Object Lambda

S3 Object Lambda 可以为 S3 数据提供一个额外的视图，对源文件做一些修改后再返回给发起请求的客户端。

它读写 S3 的速度非常快（20M 只需要不到 300ms），但是有个缺点是，它无法设置为 Public，必须要通过 Role 授权访问。

它会收取这几部分费用：

- 调用次数计费 - 这个通常很低
- 返回的数据量计费 - 这个通常是成本最高的一部分

因此在文件比较大时，用量比较高时，一个比较取巧的使用方法是：

- 使用一个代理服务请求 S3 Object Lambda
- S3 Object Lambda 将数据处理完成后，上传到 S3 的一个临时存储文件夹内，并直接返回临时文件的地址
  - 其中的文件只保留 3h/6h
- 代理服务返回 302 重定向到拿到的临时文件地址


